<!DOCTYPE html>
<html>
<head>
    <script>
    
        function setCookie(cname, cvalue, exdays) {
            console.log("Enter set cookie routine");
            var d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            var expires = "Expires = " + d.toGMTString();
            document.cookie = cname + "=" + cvalue + "; " + expires;
        }
        
        function getCookie(cname) {
            console.log("Loading get cookie...");
            var name = cname + "=";
            console.log(`Document cookie list is ${document.cookie}`);
            var ca = document.cookie.split(":");
            console.log("Displacing ca:" + ca);
            for(var i = 0; i < ca.length; i++) {
                var c = ca[i];
                console.log(`C at i: ${ca[i]}`);
                while(c.charAt(0) == ' ') c = c.substring(1);
                if(c.indexOf(name) == 0) {
                    return c.substing(name.length, c.length);
                }
            }
            return "";    
        }
        
        function checkCookie() {
            var user = getCookie("Username");
            if(user != "") {
                alert("Welcome again, " + user);
            } 
            else {
                user = prompt("Please enter your name: ", "");
                if(user != "" && user != null) {
                    console.log("No cookie exists, with that name!");
                    setCookie("Username", user, 30);
                }
            }
        }
        
    </script>
</head>

<body onload = "checkCookie()"></body>
</html>